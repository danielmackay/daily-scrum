@page "/daily-scrum/preview"
@using MediatR
@using WebUI.Features.DailyScrum.Components
@using Microsoft.AspNetCore.Components.Web
@using WebUI.Features.DailyScrum.Queries
@inject ISender Sender

<PageTitle>Daily Scrum</PageTitle>

<h1>Daily Scrum - Preview</h1>

<div class="generated-email">

    @if (_viewModel is not null)
    {
        <Heading Text="Hi SSWBenchMasters,"/>

        <Summary ViewModel="_viewModel.UserSummary"/>

        <Heading Text="Yesterday I worked on:"/>

        <TaskList Projects="_viewModel.YesterdaysProjects" Tasks="_viewModel.YesterdaysTasks"/>

        <Heading Text="Today I'm working on:" />

        <TaskList Projects="_viewModel.TodaysProjects" Tasks="_viewModel.TodaysTasks" />

        <p>
            &lt;This email was sent as per <a href="https://my.sugarlearning.com/SSW/items/8291">https://my.sugarlearning.com/SSW/items/8291</a> /&gt;
        </p>
    }
</div>

@code {

    private DailyScrumViewModel? _viewModel;

    protected override async Task OnInitializedAsync()
    {
        _viewModel = await Sender.Send(new GetDailyScrumQuery());
        await base.OnInitializedAsync();
    }

}
